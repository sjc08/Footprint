<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Footprint</title>
    <link rel="stylesheet" href="halfmoon.min.css">
    <script src="halfmoon.min.js"></script>
    <script src="jquery.min.js"></script>
    <script src="moment-with-locales.min.js"></script>
    <script src="coordtransform.min.js"></script>
</head>

<body>
    <div class="position-absolute z-10 pointer-events-none m-10">
        <span id="time1">记录时间</span> | <span id="duration">停留时长</span><br>
        [ <span id="time2">更新时间</span> ]<br>
        坐标: <span id="latitude">-</span>,<span id="longitude">-</span><br>
        精度: <span id="accuracy">-</span> m<br>
        海拔: <span id="altitude">-</span> m<br>
        方向: <span id="bearing">-</span>°<br>
        速度: <span id="speed">-</span> km/h
    </div>
    <div id="container" style="height: 100vh;"></div>
    <script>
        window._AMapSecurityConfig = {
            securityJsCode: 'c68019763999486713f65af69b812d37'
        }
    </script>
    <script src="https://webapi.amap.com/maps?v=2.0&key=3b9a8c37d8a26809a658bb8c59ce17a4"></script>
    <script>
        var map = new AMap.Map('container', {
            zoom: 16
        });

        moment.locale('zh-cn');

        function mark(point1, point2) {
            var position1 = coordtransform.wgs84togcj02(point1.Longitude, point1.Latitude);
            var position2 = coordtransform.wgs84togcj02(point2.Longitude, point2.Latitude);
            $('#time1').text(moment(point1.Time).calendar());
            $('#duration').text(moment.duration(point1.Duration).humanize());
            $('#time2').text(moment(point2.Time).format('lll'));
            $('#latitude').text(point2.Latitude.toFixed(5));
            $('#longitude').text(point2.Longitude.toFixed(5));
            $('#accuracy').text(point2.Accuracy.toFixed(1));
            $('#altitude').text(point2.Altitude.toFixed(1));
            $('#bearing').text(Math.round(point2.Bearing));
            $('#speed').text((point2.Speed * 3.6).toFixed(1));
            var marker1 = new AMap.Marker({
                position: position1,
                icon: 'flag.svg',
                anchor: 'bottom-left'
            });
            var marker2 = new AMap.Marker({
                position: position2,
                icon: 'circle.svg',
                anchor: 'center'
            });
            map.clearMap();
            map.add(marker1);
            map.add(marker2);
            map.panTo(position2);
        }
    </script>
</body>

</html>